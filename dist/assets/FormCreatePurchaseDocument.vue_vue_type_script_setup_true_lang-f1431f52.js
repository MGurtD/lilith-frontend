import{u as h}from"./suppliers-ddadd900.js";import{d as k,j as x,E as C,r as S,h as n,a as w,c as D,e as o,i as l,k as c,D as E}from"./index-6eb74133.js";import{c as I,a as d,e as B,F as g}from"./form-validator-f3848ee5.js";const F={class:"mt-2"},L=o("label",{class:"block text-900 mb-2"},"Proveïdor",-1),N={class:"mt-2"},$=o("label",{class:"block text-900 mb-2"},"Exercici",-1),y={class:"mt-2"},T=o("label",{class:"block text-900 mb-2"},"Data",-1),U={class:"mt-2"},J=k({__name:"FormCreatePurchaseDocument",props:{createRequest:{}},emits:["submit"],setup(u,{emit:m}){const a=u,p=x(),b=C(),f=h(),V=I().shape({exerciseId:d().required("L'exercici és obligatori"),supplierId:d().required("El client és obligatori"),date:B().required("La data és obligatoria")}),i=S({result:!1,errors:{}}),_=()=>{const e=new g(V);i.value=e.validate(a.createRequest)},q=()=>{if(_(),i.value.result)a.createRequest.date=E(a.createRequest.date),m("submit",a.createRequest);else{let e="";Object.entries(i.value.errors).forEach(t=>{e+=`${t[1].map(r=>r)}.   `}),p.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,t)=>{const r=n("Dropdown"),v=n("Calendar"),R=n("Button");return w(),D("form",null,[o("div",F,[L,l(r,{class:"w-full",modelValue:e.createRequest.supplierId,"onUpdate:modelValue":t[0]||(t[0]=s=>e.createRequest.supplierId=s),editable:"",options:c(f).suppliers,optionValue:"id",optionLabel:"comercialName"},null,8,["modelValue","options"])]),o("div",N,[$,l(r,{class:"w-full",modelValue:e.createRequest.exerciseId,"onUpdate:modelValue":t[1]||(t[1]=s=>e.createRequest.exerciseId=s),editable:"",options:c(b).exercises,optionValue:"id",optionLabel:"name"},null,8,["modelValue","options"])]),o("div",y,[T,l(v,{modelValue:e.createRequest.date,"onUpdate:modelValue":t[2]||(t[2]=s=>e.createRequest.date=s)},null,8,["modelValue"])]),o("footer",U,[l(R,{label:"Crear",onClick:q,style:{float:"right"}})])])}}});export{J as _};
