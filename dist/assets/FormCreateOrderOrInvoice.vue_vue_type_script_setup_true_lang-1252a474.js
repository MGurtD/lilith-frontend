import{u as h}from"./customers-82526395.js";import{u as C}from"./masterData-7d768ff1.js";import{d as k,j as D,r as I,h as i,a as w,c as S,e as o,i as l,k as c,D as x}from"./index-abfce291.js";import{c as B,a as d,F as E}from"./form-validator-012be6a9.js";const F={class:"mt-2"},N=o("label",{class:"block text-900 mb-2"},"Client",-1),O={class:"mt-2"},g=o("label",{class:"block text-900 mb-2"},"Exercici",-1),y={class:"mt-2"},L=o("label",{class:"block text-900 mb-2"},"Data",-1),T={class:"mt-2"},z=k({__name:"FormCreateOrderOrInvoice",props:{createRequest:{}},emits:["submit"],setup(u,{emit:m}){const a=u,p=D(),b=C(),f=h(),V=B().shape({exerciseId:d().required("L'exercici és obligatori"),customerId:d().required("El client és obligatori")}),n=I({result:!1,errors:{}}),_=()=>{const e=new E(V);n.value=e.validate(a.createRequest)},v=()=>{if(_(),n.value.result)a.createRequest.date=x(a.createRequest.date),m("submit",a.createRequest);else{let e="";Object.entries(n.value.errors).forEach(t=>{e+=`${t[1].map(r=>r)}.   `}),p.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,t)=>{const r=i("Dropdown"),q=i("Calendar"),R=i("Button");return w(),S("form",null,[o("div",F,[N,l(r,{class:"w-full",modelValue:e.createRequest.customerId,"onUpdate:modelValue":t[0]||(t[0]=s=>e.createRequest.customerId=s),editable:"",options:c(f).customers,optionValue:"id",optionLabel:"comercialName"},null,8,["modelValue","options"])]),o("div",O,[g,l(r,{class:"w-full",modelValue:e.createRequest.exerciseId,"onUpdate:modelValue":t[1]||(t[1]=s=>e.createRequest.exerciseId=s),editable:"",options:c(b).exercises,optionValue:"id",optionLabel:"name"},null,8,["modelValue","options"])]),o("div",y,[L,l(q,{modelValue:e.createRequest.date,"onUpdate:modelValue":t[2]||(t[2]=s=>e.createRequest.date=s)},null,8,["modelValue"])]),o("footer",T,[l(R,{label:"Crear",onClick:v,style:{float:"right"}})])])}}});export{z as _};
