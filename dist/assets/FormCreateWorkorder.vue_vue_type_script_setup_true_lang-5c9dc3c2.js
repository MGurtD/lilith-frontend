import{c as w,d as O,a as u,F as C}from"./form-validator-f8953ae6.js";import{d as M,j as _,o as h,r as B,h as s,a as I,c as F,e as o,i as r,k as i,s as L,y as g,l as q}from"./index-98d6f8aa.js";import{u as N}from"./reference-73298289.js";import{u as S}from"./workmaster-bd2ddef8.js";const U={key:0},Q=o("label",{class:"block text-900 mb-2"},"Ruta",-1),T={class:"mt-2"},$=o("label",{class:"block text-900 mb-2"},"Data Prevista",-1),E={class:"mt-2"},R=o("label",{class:"block text-900 mb-2"},"Comentari Fabriació",-1),j=o("br",null,null,-1),H=M({__name:"FormCreateWorkorder",props:{createWorkOrderDto:{},filteredWorkMasters:{}},emits:["submit","cancel"],setup(c,{emit:p}){const m=c,l=S(),k=N(),f=_();h(()=>{l.workmasters||l.fetchAllActives()});const b=w().shape({plannedQuantity:O().min(1,"La quantitat ha de ser superior a 0").required("La quanitat és obligatoria"),workMasterId:u().required("La ruta de fabricació és obligatoria"),plannedDate:u().required("La data prevista és obligatoria")}),n=B({result:!1,errors:{}}),D=()=>{const e=new C(b);n.value=e.validate(m.createWorkOrderDto)},V=async()=>{if(D(),n.value.result)p("submit",m.createWorkOrderDto);else{let e="";Object.entries(n.value.errors).forEach(t=>{e+=`${t[1].map(d=>d)}.   `}),f.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,t)=>{const d=s("Dropdown"),v=s("Calendar"),W=s("Textarea"),y=s("Button");return e.createWorkOrderDto?(I(),F("form",U,[o("div",null,[Q,r(d,{modelValue:e.createWorkOrderDto.workMasterId,"onUpdate:modelValue":t[0]||(t[0]=a=>e.createWorkOrderDto.workMasterId=a),filter:"",editable:"",options:e.filteredWorkMasters?e.filteredWorkMasters:i(l).workmasters,optionValue:"id",optionLabel:a=>i(k).getShortNameById(a.referenceId),class:"w-full"},null,8,["modelValue","options","optionLabel"])]),o("div",T,[r(g,{class:"mb-2 w-full",label:"Quantitat",modelValue:e.createWorkOrderDto.plannedQuantity,"onUpdate:modelValue":t[1]||(t[1]=a=>e.createWorkOrderDto.plannedQuantity=a),type:i(L).NUMERIC},null,8,["modelValue","type"])]),o("div",null,[$,r(v,{modelValue:e.createWorkOrderDto.plannedDate,"onUpdate:modelValue":t[2]||(t[2]=a=>e.createWorkOrderDto.plannedDate=a),dateFormat:"dd/mm/yy",class:"mt-2"},null,8,["modelValue"])]),o("div",E,[R,r(W,{class:"w-full",modelValue:e.createWorkOrderDto.comment,"onUpdate:modelValue":t[3]||(t[3]=a=>e.createWorkOrderDto.comment=a)},null,8,["modelValue"])]),j,o("div",null,[r(y,{label:"Crear",style:{float:"right"},onClick:V})])])):q("",!0)}}});export{H as _};
