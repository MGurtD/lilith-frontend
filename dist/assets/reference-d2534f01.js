import{N as a,T as n}from"./index-8de45480.js";const t=new n("/reference"),o=a({id:"reference",state:()=>({reference:void 0,references:void 0,referenceFormats:void 0,referenceSuppliers:void 0,referenceCategories:[{code:"Service",description:"Servei"},{code:"Tool",description:"Eina"},{code:"Material",description:"Material"}],module:""}),getters:{getByCategory:r=>e=>{var s;return(s=r.references)==null?void 0:s.filter(i=>i.categoryName===e)},getFullName:r=>e=>e?e.sales?`${e.code} (v. ${e.version}) - ${e.description}`:`${e.code} - ${e.description}`:"",getShortName:r=>e=>e?e.sales?`${e.code} (v. ${e.version})`:`${e.code}`:""},actions:{getFullNameById(r){var s;const e=(s=this.references)==null?void 0:s.find(i=>i.id===r);return e?this.getFullName(e):""},getShortNameById(r){var s;const e=(s=this.references)==null?void 0:s.find(i=>i.id===r);return e?this.getShortName(e):""},setNewReference(r,e){this.reference={id:r,code:"",description:"",cost:0,price:0,disabled:!1,version:"1",sales:this.module==="sales",purchase:this.module==="purchase",production:this.module==="production",referenceTypeId:null,referenceFormatId:null,categoryName:e,transportAmount:0,density:0,lastPurchaseCost:0,isService:!1,lastCost:0,workMasterCost:0,customerId:null,areaId:null}},async getReferencesByModuleAndCategory(r,e){return await t.getByModule(r,e)},async getPrice(r,e){return await t.getPrice(r,e)},async fetchReferences(){this.references=await t.getAll(),this.referenceFormats||(this.referenceFormats=await t.getReferenceFormats())},async fetchReferencesByModule(r){this.module=r,this.references=await t.getByModule(r),this.referenceFormats||(this.referenceFormats=await t.getReferenceFormats())},async fetchReferencesByCustomer(r){this.module="sales",this.references=await t.getSalesReferencesByCustomer(r),this.referenceFormats||(this.referenceFormats=await t.getReferenceFormats())},async fetchReference(r){this.reference=await t.getById(r)},async createReference(r){const e=await t.create(r);return e&&await this.fetchReferencesByModule(this.module),e},async updateReference(r,e){const s=await t.update(r,e);return s&&await this.fetchReferencesByModule(this.module),s},async deleteReference(r){const e=await t.deleteReference(r);return e.result&&await this.fetchReferencesByModule(this.module),e},async fetchReferenceSuppliers(r){this.referenceSuppliers=await t.getReferenceSuppliers(r)},async addSupplier(r){const e=await t.addSupplier(r);return e&&await this.fetchReferenceSuppliers(r.referenceId),e},async updateSupplier(r){const e=await t.updateSupplier(r);return e&&await this.fetchReferenceSuppliers(r.referenceId),e},async deleteSupplier(r){const e=await t.removeSupplier(r.id);return e&&await this.fetchReferenceSuppliers(r.referenceId),e}}});export{o as u};
