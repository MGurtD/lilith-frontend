import{u as h}from"./customers-2780a7e1.js";import{u as C}from"./masterData-52715ac7.js";import{d as k,j as D,r as I,h as n,a as w,c as S,e as o,i as l,k as c,D as x}from"./index-3259d18c.js";import{c as B,a as d,e as g,F as E}from"./form-validator-74a9b5a3.js";const F={class:"mt-2"},L=o("label",{class:"block text-900 mb-2"},"Client",-1),N={class:"mt-2"},O=o("label",{class:"block text-900 mb-2"},"Exercici",-1),$={class:"mt-2"},y=o("label",{class:"block text-900 mb-2"},"Data",-1),T={class:"mt-2"},A=k({__name:"FormCreateOrderOrInvoice",props:{createRequest:{}},emits:["submit"],setup(u,{emit:m}){const a=u,p=D(),b=C(),f=h(),V=B().shape({exerciseId:d().required("L'exercici és obligatori"),customerId:d().required("El client és obligatori"),date:g().required("La data és obligatòria")}),i=I({result:!1,errors:{}}),_=()=>{const e=new E(V);i.value=e.validate(a.createRequest)},q=()=>{if(_(),i.value.result)a.createRequest.date=x(a.createRequest.date),m("submit",a.createRequest);else{let e="";Object.entries(i.value.errors).forEach(t=>{e+=`${t[1].map(r=>r)}.   `}),p.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,t)=>{const r=n("Dropdown"),v=n("Calendar"),R=n("Button");return w(),S("form",null,[o("div",F,[L,l(r,{class:"w-full",modelValue:e.createRequest.customerId,"onUpdate:modelValue":t[0]||(t[0]=s=>e.createRequest.customerId=s),editable:"",options:c(f).customers,optionValue:"id",optionLabel:"comercialName"},null,8,["modelValue","options"])]),o("div",N,[O,l(r,{class:"w-full",modelValue:e.createRequest.exerciseId,"onUpdate:modelValue":t[1]||(t[1]=s=>e.createRequest.exerciseId=s),editable:"",options:c(b).exercises,optionValue:"id",optionLabel:"name"},null,8,["modelValue","options"])]),o("div",$,[y,l(v,{modelValue:e.createRequest.date,"onUpdate:modelValue":t[2]||(t[2]=s=>e.createRequest.date=s)},null,8,["modelValue"])]),o("footer",T,[l(R,{label:"Crear",onClick:q,style:{float:"right"}})])])}}});export{A as _};
