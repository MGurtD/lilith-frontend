import{N as a}from"./index-1148c571.js";import{E as i}from"./index-f8ea6542.js";const n=a({id:"receipts",state:()=>({receipts:void 0,receipt:void 0,receptions:void 0,selectorReceipts:void 0}),getters:{},actions:{setNewReceipt(e){this.receipt={id:e,date:"",details:[],disabled:!1,exerciseId:"",statusId:"",supplierId:"",supplierNumber:"",number:"",purchaseInvoiceId:null}},async fetchFiltered(e,t,c,s){this.receipts=await i.Receipt.getFiltered(e,t,c)},async fetchInvoiceableBySupplier(e){this.selectorReceipts=await i.Receipt.GetInvoiceable(e)},async fetchByInvoice(e){this.receipts=await i.Receipt.GetByInvoice(e)},async fetchReceipts(){this.receipts=await i.Receipt.getAll()},async fetchReceipt(e){this.receipt=await i.Receipt.getById(e)},async createReceipt(e){const t=await i.Receipt.create(e);return t&&await this.fetchReceipts(),t},async updateReceipt(e,t){const c=await i.Receipt.update(e,t);return c&&await this.fetchReceipts(),c},async associateInvoice(e,t){return e.purchaseInvoiceId=t,await i.Receipt.update(e.id,e)},async unassociateInvoice(e,t){return e.purchaseInvoiceId=null,await i.Receipt.update(e.id,e)},async deleteReceipt(e){const t=await i.Receipt.delete(e);return t&&await this.fetchReceipts(),t},async createReceiptDetail(e){const t=await i.Receipt.addDetail(e);return t.result&&await this.fetchReceipt(e.receiptId),t},async updateReceiptDetail(e,t){const c=await i.Receipt.updateDetail(t);return c.result&&await this.fetchReceipt(t.receiptId),c},async deleteReceiptDetail(e){const t=await i.Receipt.removeDetail(e);if(t.result){const c=this.receipt.details.find(s=>s.id===e);if(c){const s=this.receipt.details.indexOf(c);this.receipt.details.splice(s)}}return t},async calculateDetailWeightAndPrice(e){return await i.Receipt.calculateDetailWeightAndPrice(e)},async getReceptions(e){this.receptions=await i.Order.getReceptions(e)},async addReceptions(e){return await i.Receipt.addReceptions(e)}}});export{n as u};
