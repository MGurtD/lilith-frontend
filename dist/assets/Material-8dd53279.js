import{_}from"./FormMaterial.vue_vue_type_script_setup_true_lang-c4ef5add.js";import{d as R,r as n,F as o,v as M,g as w,u as E,z as T,o as k,j as y,k as u,m as I,l as b,P as x,a as A}from"./index-0c51ec9c.js";import{u as B}from"./reference-7bd40fb9.js";import"./form-validator-f8953ae6.js";import"./_commonjsHelpers-725317a4.js";import"./tax-2df34bc9.js";import"./index-f0c9bd46.js";import"./base.service-ebedc193.js";import"./reference.service-051d81be.js";import"./referenceType-e16c8737.js";import"./DropdownReferenceType.vue_vue_type_script_setup_true_lang-67b7306c.js";const G=R({__name:"Material",setup(C){const c=n(o.EDIT),l=M(),m=w(),f=E(),r=B(),{reference:t}=T(r),i=n(""),p=async()=>{await r.fetchReference(i.value);let e="";t.value?(c.value=o.EDIT,e=`Material ${t.value.code} - ${t.value.description}`):(c.value=o.CREATE,r.setNewReference(i.value),e="Alta de material"),f.setMenuItem({icon:x.BUILDING,backButtonVisible:!0,title:e})};k(async()=>{i.value=l.params.id,await p()});const d=y(),v=async()=>{const e=t.value;let a=!1,s="";c.value===o.CREATE?(a=await r.createReference(e),a?s="Material creat correctament":s="El material ja existeix"):(a=await r.updateReference(e.id,e),s="Material actualizada correctament"),d.add({severity:a?"success":"warn",summary:s,life:5e3}),a&&m.back()};return(e,a)=>u(t)?(A(),I(_,{key:0,reference:u(t),onSubmit:v},null,8,["reference"])):b("",!0)}});export{G as default};
