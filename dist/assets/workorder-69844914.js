import{J as i}from"./index-50afd4ff.js";import{d as a}from"./index-fa80c822.js";const h=i({id:"workorder",state:()=>({workorder:void 0,workorders:void 0,workorderPhase:void 0,workorderPhases:void 0,workorderPhaseDetail:void 0,workorderPhaseDetails:void 0,detailedWorkOrders:void 0}),getters:{},actions:{getWorkOrderCodeById(e){var t;const r=(t=this.workorders)==null?void 0:t.find(s=>s.id===e);if(r)return r.code},setNew(e){this.workorder={id:e,code:"",workMasterId:"",referenceId:"",exerciceId:"",order:0,plannedQuantity:0,plannedDate:"",statusId:"",startTime:null,endTime:null,comment:"",disabled:!1,costMachine:0,costOperator:0,machineCost:0,operatorCost:0,machineTime:0,operatorTime:0,materialCost:0,materialTime:0,totalQuantity:0,phases:[]}},async fetchFiltered(e,r,t){this.workorders=await a.WorkOrder.GetBetweenDatesAndStatus(e,r,t)},async fetchAll(){this.workorders=await a.WorkOrder.getAll()},async fetchOne(e){this.workorder=await a.WorkOrder.getById(e)},async fetchBySalesOrder(e){this.workorders=await a.WorkOrder.GetBySalesOrderId(e)},async create(e){const r=await a.WorkOrder.Create(e);return r&&await this.fetchOne(r.content.id),r},async createAndUpdateSalesOrderDetail(e,r){const t=await a.WorkOrder.CreateFromSalesOrderDetail(e,r);return t&&await this.fetchOne(t.content.id),t},async update(e,r){const t=await a.WorkOrder.update(e,r);return t&&await this.fetchAll(),t},async delete(e){const r=await a.WorkOrder.delete(e);return r&&await this.fetchAll(),r},async fetchPhaseById(e){this.workorderPhase=await a.WorkOrderPhase.getById(e)},async createPhase(e){const r=await a.WorkOrderPhase.create(e);return r&&await this.fetchPhaseById(e.id),r},async updatePhase(e,r){const t=await a.WorkOrderPhase.update(e,r);return t&&await this.fetchPhaseById(r.id),t},async deletePhase(e){const r=await a.WorkOrderPhase.delete(e);return r&&await this.fetchOne(this.workorder.id),r},async createPhaseDetail(e){const r=await a.WorkOrderPhaseDetail.create(e);return r&&await this.fetchPhaseById(e.workOrderPhaseId),r},async updatePhaseDetail(e,r){const t=await a.WorkOrderPhaseDetail.update(e,r);return t&&await this.fetchPhaseById(r.workOrderPhaseId),t},async deletePhaseDetail(e){const r=await a.WorkOrderPhaseDetail.delete(e);return r&&await this.fetchPhaseById(this.workorderPhase.id),r},async createPhaseBomItem(e){const r=await a.WorkOrderPhaseBillOfMaterials.create(e);return r&&await this.fetchPhaseById(e.workOrderPhaseId),r},async updatePhaseBomItem(e,r){const t=await a.WorkOrderPhaseBillOfMaterials.update(e,r);return t&&await this.fetchPhaseById(r.workOrderPhaseId),t},async deletePhaseBomItem(e){const r=await a.WorkOrderPhaseBillOfMaterials.delete(e);return r&&await this.fetchPhaseById(this.workorderPhase.id),r},async fetchByWorkcenterId(e){this.detailedWorkOrders=await a.DetailedWorkOrder.getByWorkcenterId(e)},async fetchByWorkOrderId(e){this.detailedWorkOrders=await a.DetailedWorkOrder.getByWorkOrderId(e)}}});export{h as u};
