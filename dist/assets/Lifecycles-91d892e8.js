import{d as b,g as x,u as k,o as I,P as c,j as E,h as d,m as B,w as i,k as r,a as N,e as u,i as o,G as _,H as D,n as R,y as T}from"./index-d4f01faf.js";import{u as $}from"./lifecycle-1f6a3992.js";const L={class:"flex flex-wrap align-items-center justify-content-between gap-2"},M=u("span",{class:"text-xl text-900 font-bold"},"Cicles de vida",-1),P=["onClick"],f="lifecycle",H=b({__name:"Lifecycles",setup(V){const m=x(),h=k(),t=$();I(async()=>{await t.fetchAll(),h.setMenuItem({icon:c.REFRESH,title:"Gestió de cicles de vida"})});const p=e=>{let s="";if(e.initialStatusId&&e.initialStatusId.length>0){const a=e.statuses.find(n=>n.id===e.initialStatusId);a&&(s=a.name)}return s},y=()=>{m.push({path:`/${f}/${T()}`})},w=e=>{e.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/${f}/${e.data.id}`})},S=E(),g=async(e,s)=>{var a;if(await t.fetchOne(s.id),!t.lifecycle||t.lifecycle.statuses.length>0||t.transitions.length>0){S.add({summary:"Eliminar cicle de vida",detail:`El cicle de vida ${(a=t.lifecycle)==null?void 0:a.name} té dependencies`,severity:"warn",life:5e3});return}await t.delete(s.id)};return(e,s)=>{const a=d("Button"),n=d("Column"),v=d("DataTable");return N(),B(v,{value:r(t).lifecycles,tableStyle:"min-width: 100%",onRowClick:w},{header:i(()=>[u("div",L,[M,o(a,{icon:r(c).PLUS,rounded:"",raised:"",onClick:y},null,8,["icon"])])]),default:i(()=>[o(n,{field:"name",header:"Nom",style:{width:"33%"}}),o(n,{field:"description",header:"Descripció",style:{width:"33%"}}),o(n,{header:"Estat Inicial",style:{width:"33%"}},{body:i(l=>[_(D(p(l.data)),1)]),_:1}),o(n,null,{body:i(l=>[u("i",{class:R([r(c).TIMES,"grid_delete_column_button"]),onClick:C=>g(C,l.data)},null,10,P)]),default:i(()=>[_(" >")]),_:1})]),_:1},8,["value"])}}});export{H as default};
