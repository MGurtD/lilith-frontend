import{d as h,j as w,r as B,h as i,c as f,e as s,i as a,n as t,z as d,k as c,l as T,L as E,a as b,s as g}from"./index-0165ef2a.js";import{c as L,a as m,F as S}from"./form-validator-29ed56b4.js";import{u as D}from"./tax-d88f1d3d.js";import{u as N}from"./reference-3a204a36.js";import{u as R}from"./referenceType-8cab534f.js";import{_ as $}from"./DropdownReferenceType.vue_vue_type_script_setup_true_lang-6664b682.js";const q=s("br",null,null,-1),z={key:0},j={class:"three-columns"},x={class:"mt-1"},G={class:"mt-1"},M={class:"mt-1"},O={class:"four-columns"},Y={class:"mt-1"},A=s("label",{class:"block text-900 mb-2"},"Format",-1),H={class:"mt-1"},J={class:"mt-1"},K=s("label",{class:"block text-900 mb-2"},"Impost",-1),P=s("label",{class:"block text-900 mb-2"},"Desactivada",-1),se=h({__name:"FormMaterial",props:{reference:{}},emits:["submit","cancel"],setup(V,{emit:v}){const u=V,_=w(),C=D(),y=N();R();const k=L().shape({code:m().required("El codi és obligatori").max(50,"El codi no pot superar els 50 carácters"),description:m().required("La descripció és obligatori").max(250,"La descripció pot superar els 250 carácters"),taxId:m().required("El tipus d'iva es obligatori")}),r=B({result:!1,errors:{}}),F=()=>{const e=new S(k);r.value=e.validate(u.reference)},I=async()=>{if(F(),r.value.result)v("submit",u.reference);else{let e="";Object.entries(r.value.errors).forEach(o=>{e+=`${o[1].map(n=>n)}.   `}),_.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,o)=>{const n=i("Button"),p=i("Dropdown"),U=i("Checkbox");return b(),f(E,null,[s("div",null,[a(n,{label:"Guardar",class:"grid_add_row_button",size:"small",onClick:I}),q]),e.reference?(b(),f("form",z,[s("section",j,[s("div",x,[a(d,{class:t(["mb-2",{"p-invalid":r.value.errors.code}]),label:"Codi",id:"code",modelValue:e.reference.code,"onUpdate:modelValue":o[0]||(o[0]=l=>e.reference.code=l)},null,8,["modelValue","class"])]),s("div",G,[a(d,{class:t(["mb-2",{"p-invalid":r.value.errors.description}]),label:"Descripció",id:"description",modelValue:e.reference.description,"onUpdate:modelValue":o[1]||(o[1]=l=>e.reference.description=l)},null,8,["modelValue","class"])]),s("div",M,[a($,{label:"Tipus de material",modelValue:e.reference.referenceTypeId,"onUpdate:modelValue":o[2]||(o[2]=l=>e.reference.referenceTypeId=l)},null,8,["modelValue"])])]),s("section",O,[s("div",Y,[A,a(p,{modelValue:e.reference.referenceFormatId,"onUpdate:modelValue":o[3]||(o[3]=l=>e.reference.referenceFormatId=l),editable:"",options:c(y).referenceFormats,optionValue:"id",optionLabel:"description",class:t(["w-full",{"p-invalid":r.value.errors.taxid}])},null,8,["modelValue","options","class"])]),s("div",H,[a(d,{type:c(g).CURRENCY,label:"Últim cost de compra",id:"lastCost",modelValue:e.reference.lastCost,"onUpdate:modelValue":o[4]||(o[4]=l=>e.reference.lastCost=l),disabled:""},null,8,["type","modelValue"])]),s("div",J,[K,a(p,{modelValue:e.reference.taxId,"onUpdate:modelValue":o[5]||(o[5]=l=>e.reference.taxId=l),editable:"",options:c(C).taxes,optionValue:"id",optionLabel:"name",class:t(["w-full",{"p-invalid":r.value.errors.taxid}])},null,8,["modelValue","options","class"])]),s("div",null,[P,a(U,{modelValue:e.reference.disabled,"onUpdate:modelValue":o[6]||(o[6]=l=>e.reference.disabled=l),binary:!0},null,8,["modelValue"])])])])):T("",!0)],64)}}});export{se as _};
