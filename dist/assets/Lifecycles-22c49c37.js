import{d as b,g as x,u as k,o as I,P as c,j as E,h as d,m as B,w as i,k as r,a as D,e as u,i as o,C as _,D as N,n as R}from"./index-50afd4ff.js";import{u as T}from"./lifecycle-31bb0ab7.js";import{v as $}from"./v4-a960c1f4.js";import"./index-fe67f03a.js";import"./base.service-f381296e.js";import"./reference.service-b9737163.js";const L={class:"flex flex-wrap align-items-center justify-content-between gap-2"},M=u("span",{class:"text-xl text-900 font-bold"},"Cicles de vida",-1),P=["onClick"],f="lifecycle",O=b({__name:"Lifecycles",setup(V){const m=x(),p=k(),t=T();I(async()=>{await t.fetchAll(),p.setMenuItem({icon:c.REFRESH,title:"Gestió de cicles de vida"})});const h=e=>{let s="";if(e.initialStatusId&&e.initialStatusId.length>0){const a=e.statuses.find(n=>n.id===e.initialStatusId);a&&(s=a.name)}return s},y=()=>{m.push({path:`/${f}/${$()}`})},v=e=>{e.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/${f}/${e.data.id}`})},w=E(),C=async(e,s)=>{var a;if(await t.fetchOne(s.id),!t.lifecycle||t.lifecycle.statuses.length>0||t.transitions.length>0){w.add({summary:"Eliminar cicle de vida",detail:`El cicle de vida ${(a=t.lifecycle)==null?void 0:a.name} té dependencies`,severity:"warn",life:5e3});return}await t.delete(s.id)};return(e,s)=>{const a=d("Button"),n=d("Column"),S=d("DataTable");return D(),B(S,{value:r(t).lifecycles,tableStyle:"min-width: 100%",onRowClick:v},{header:i(()=>[u("div",L,[M,o(a,{icon:r(c).PLUS,rounded:"",raised:"",onClick:y},null,8,["icon"])])]),default:i(()=>[o(n,{field:"name",header:"Nom",style:{width:"33%"}}),o(n,{field:"description",header:"Descripció",style:{width:"33%"}}),o(n,{header:"Estat Inicial",style:{width:"33%"}},{body:i(l=>[_(N(h(l.data)),1)]),_:1}),o(n,null,{body:i(l=>[u("i",{class:R([r(c).TIMES,"grid_delete_column_button"]),onClick:g=>C(g,l.data)},null,10,P)]),default:i(()=>[_(" >")]),_:1})]),_:1},8,["value"])}}});export{O as default};
