import{Q as O,d as I,g as N,u as k,k as x,z as D,o as E,P as m,h as l,q,w as s,l as p,a as M,e as _,i as t,I as f,t as y,n as R,C as $}from"./index-f6af8c81.js";import{u as A}from"./plantmodel-2dcc063a.js";import{c as P}from"./index-5443ddc0.js";const V=new P("/operatortype"),j=O({id:"operatortype",state:()=>({operatorTypes:void 0}),getters:{getOperatorTypeNameById:d=>r=>{if(!r||!d.operatorTypes)return"";const i=d.operatorTypes.find(o=>o.id===r);return i?i.name:""}},actions:{async fetchOperatorTypes(){this.operatorTypes=await V.getAll()}}}),z={class:"flex flex-wrap align-items-center justify-content-between gap-2"},L=_("span",{class:"text-xl text-900 font-bold"},"Operaris",-1),F=["onClick"],H=I({__name:"Operators",setup(d){const r=N(),i=k(),o=A(),u=j(),T=x(),w=D();E(async()=>{await o.fetchOperators(),u.operatorTypes||await u.fetchOperatorTypes(),i.setMenuItem({icon:m.CALENDAR,title:"Gestió d'operaris"})});const C=()=>{r.push({path:`/operator/${$()}`})},g=n=>{n.originalEvent.target.className.includes("grid_delete_column_button")||r.push({path:`/operator/${n.data.id}`})},v=(n,c)=>{w.require({target:n.currentTarget,message:`Está segur que vol eliminar l'operari ${c.surname}, ${c.name}?`,icon:"pi pi-question-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",accept:async()=>{await o.deleteOperator(c.id)&&(T.add({severity:"success",summary:"Eliminat",life:3e3}),await o.fetchOperators())}})};return(n,c)=>{const h=l("Button"),a=l("Column"),b=l("BooleanColumn"),S=l("DataTable");return M(),q(S,{value:p(o).operators,tableStyle:"min-width: 100%",onRowClick:g},{header:s(()=>[_("div",z,[L,t(h,{icon:p(m).PLUS,rounded:"",raised:"",onClick:C},null,8,["icon"])])]),default:s(()=>[t(a,{field:"code",header:"Codi",style:{width:"15%"}}),t(a,{header:"Nom complet",style:{width:"35%"}},{body:s(e=>[f(y(e.data.name)+" "+y(e.data.surname),1)]),_:1}),t(a,{field:"vatNumber",header:"NIF",style:{width:"15%"}}),t(a,{header:"Tipus",style:{width:"15%"}},{body:s(e=>[f(y(p(u).getOperatorTypeNameById(e.data.operatorTypeId)),1)]),_:1}),t(a,{header:"Desactivat",style:{width:"10%"}},{body:s(e=>[t(b,{value:e.data.disabled},null,8,["value"])]),_:1}),t(a,null,{body:s(e=>[_("i",{class:R([p(m).TIMES,"grid_delete_column_button"]),onClick:B=>v(B,e.data)},null,10,F)]),_:1})]),_:1},8,["value"])}}});export{H as default};
