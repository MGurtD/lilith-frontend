import{d as x,g as k,u as B,o as E,P as l,k as N,h as d,q as I,w as o,l as r,a as D,e as u,i,I as _,t as R,n as T,C as $}from"./index-f6af8c81.js";import{u as L}from"./lifecycle-b04b6c31.js";const M={class:"flex flex-wrap align-items-center justify-content-between gap-2"},P=u("span",{class:"text-xl text-900 font-bold"},"Cicles de vida",-1),V=["onClick"],f="lifecycle",A=x({__name:"Lifecycles",setup(j){const m=k(),h=B(),t=L();E(async()=>{await t.fetchAll(),h.setMenuItem({icon:l.REFRESH,title:"Gestió de cicles de vida"})});const p=(e,n)=>{if(!n||n.length===0)return"";const a=e.statuses.find(s=>s.id===n);return(a==null?void 0:a.name)||""},y=e=>p(e,e.initialStatusId),g=()=>{m.push({path:`/${f}/${$()}`})},w=e=>{e.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/${f}/${e.data.id}`})},C=N(),v=async(e,n)=>{var a;if(await t.fetchOne(n.id),!t.lifecycle||t.lifecycle.statuses.length>0||t.transitions.length>0){C.add({summary:"Eliminar cicle de vida",detail:`El cicle de vida ${(a=t.lifecycle)==null?void 0:a.name} té dependencies`,severity:"warn",life:5e3});return}await t.delete(n.id)};return(e,n)=>{const a=d("Button"),s=d("Column"),S=d("DataTable");return D(),I(S,{value:r(t).lifecycles,tableStyle:"min-width: 100%",onRowClick:w},{header:o(()=>[u("div",M,[P,i(a,{icon:r(l).PLUS,rounded:"",raised:"",onClick:g},null,8,["icon"])])]),default:o(()=>[i(s,{field:"name",header:"Nom",style:{width:"25%"}}),i(s,{field:"description",header:"Descripció",style:{width:"25%"}}),i(s,{header:"Estat Inicial",style:{width:"25%"}},{body:o(c=>[_(R(y(c.data)),1)]),_:1}),i(s,null,{body:o(c=>[u("i",{class:T([r(l).TIMES,"grid_delete_column_button"]),onClick:b=>v(b,c.data)},null,10,V)]),default:o(()=>[_(" >")]),_:1})]),_:1},8,["value"])}}});export{A as default};
