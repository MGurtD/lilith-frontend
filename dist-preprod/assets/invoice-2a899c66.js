import{Q as r,S as n,a0 as l,a1 as v,a2 as d}from"./index-f6af8c81.js";import{S as i}from"./index-a7d21bd0.js";const u=r({id:"salseInvoices",state:()=>({invoice:void 0,invoices:void 0,verifactuLifecycle:void 0}),getters:{getVerifactuStatusById:e=>t=>{if(!e.verifactuLifecycle)return"";const a=e.verifactuLifecycle.statuses.find(s=>s.id===t);return a?a.name:""}},actions:{async Create(e){return await i.SalesInvoice.Create(e)},async CreateRectificative(e){return await i.SalesInvoice.CreateRectificative(e)},async GetHeaderById(e){const t=await i.SalesInvoice.GetHeader(e);t&&this.invoice&&(this.invoice.baseAmount=t.baseAmount,this.invoice.taxAmount=t.taxAmount,this.invoice.grossAmount=t.grossAmount,this.invoice.netAmount=t.netAmount)},async GetVerifactuLifecycle(){this.verifactuLifecycle||(this.verifactuLifecycle=await n.Lifecycle.getByName("Verifactu"))},async GetById(e){this.invoice=await i.SalesInvoice.getById(e),this.verifactuLifecycle||(this.verifactuLifecycle=await n.Lifecycle.getByName("Verifactu"))},async GetDetailsById(e){const t=await i.SalesInvoice.getById(e);this.invoice&&t&&(this.invoice.salesInvoiceDetails=t==null?void 0:t.salesInvoiceDetails)},async GetFiltered(e,t,a,s,c){this.verifactuLifecycle||(this.verifactuLifecycle=await n.Lifecycle.getByName("Verifactu")),s?this.invoices=await i.SalesInvoice.GetBetweenDatesAndCustomer(e,t,s):a?this.invoices=await i.SalesInvoice.GetBetweenDatesAndStatus(e,t,a):c?this.invoices=await i.SalesInvoice.GetBetweenDatesAndExcludeStatus(e,t,c):this.invoices=await i.SalesInvoice.GetBetweenDates(e,t)},async Update(e){return await i.SalesInvoice.update(e.id,e)},async UpdateInvoicesStatuses(e){return await i.SalesInvoice.UpdateStatuses(e)},async Delete(e){return await i.SalesInvoice.delete(e)},async AddDeliveryNote(e,t){const a=await i.SalesInvoice.AddDeliveryNote(e,t);return this.GetDetailsById(e),this.GetHeaderById(e),a},async RemoveDeliveryNote(e,t){const a=await i.SalesInvoice.RemoveDeliveryNote(e,t);return this.GetDetailsById(e),this.GetHeaderById(e),a},async CreateInvoiceDetail(e){const t=await i.SalesInvoice.CreateDetail(e);return this.GetDetailsById(e.salesInvoiceId),this.GetHeaderById(e.salesInvoiceId),t},async UpdateInvoiceDetail(e){const t=await i.SalesInvoice.UpdateDetail(e);return this.GetDetailsById(e.salesInvoiceId),this.GetHeaderById(e.salesInvoiceId),t},async DeleteInvoiceDetail(e){const t=await i.SalesInvoice.DeleteDetail(e);return this.GetDetailsById(e.salesInvoiceId),this.GetHeaderById(e.salesInvoiceId),t},async PrintInvoice(e,t){const a=await i.SalesInvoice.GetReportDataById(e);if(!a)return!1;const s=`Factura_${t}.docx`,o=await new d().Download(a,l.Invoice,s);return o?(v(s,o),!0):!1}}});export{u};
